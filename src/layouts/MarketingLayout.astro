---
import BaseLayout from './BaseLayout.astro';
import LanguageSwitcher from '../components/layout/LanguageSwitcher.astro';
import type { Language } from '../utils/i18n';

interface Props {
  title: string;
  description: string;
  lang?: Language;
  headerVariant?: 'default' | 'transparent';
}

const { title, description, lang = 'nl', headerVariant = 'default' } = Astro.props;

const headerClass =
  headerVariant === 'transparent'
    ? 'fixed top-0 left-0 right-0 z-50 bg-gradient-to-b from-black/30 via-black/10 to-transparent backdrop-blur-xl border-b border-white/10'
    : 'sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-200 shadow-sm';

const navLinkClass =
  headerVariant === 'transparent'
    ? 'text-white/90 hover:text-white'
    : 'text-gray-800 hover:text-primary-dark';

const brandClass = headerVariant === 'transparent' ? 'text-white drop-shadow-sm' : 'text-primary-dark';

const ctaClass =
  headerVariant === 'transparent'
    ? 'px-4 py-2 text-sm font-semibold text-white bg-white/15 rounded-full hover:bg-white/25 backdrop-blur-xl transition-all duration-200 border border-white/20'
    : 'px-4 py-2 text-sm font-semibold text-white bg-primary-purple rounded-full hover:shadow-glow-purple transition-all duration-200';

/* Navbar fallback styling for when utility classes are not available */
const headerVariantAttr = headerVariant;
---

<BaseLayout title={title} description={description} lang={lang}>
  <header class={`${headerClass} header-shell`} data-variant={headerVariantAttr}>
    <nav class="header-nav">
      <div class="header-nav__inner">
        <div class="header-nav__left">
          <a href={`/${lang}`} class={`nav-brand ${brandClass}`}>
            Pagayo
          </a>
          <div class="nav-links">
            <a href={`/${lang}/features`} class={`nav-link ${navLinkClass}`}>
              {lang === 'nl' ? 'Features' : lang === 'de' ? 'Funktionen' : 'Features'}
            </a>
            <a href={`/${lang}/pricing`} class={`nav-link ${navLinkClass}`}>
              {lang === 'nl' ? 'Prijzen' : lang === 'de' ? 'Preise' : 'Pricing'}
            </a>
            <a href={`/${lang}/contact`} class={`nav-link ${navLinkClass}`}>
              {lang === 'nl' ? 'Contact' : lang === 'de' ? 'Kontakt' : 'Contact'}
            </a>
            <a href="/docs" class={`nav-link ${navLinkClass}`}>
              {lang === 'nl' ? 'Docs' : lang === 'de' ? 'Dokumentation' : 'Docs'}
            </a>
          </div>
        </div>
        <div class="header-nav__right">
          <LanguageSwitcher currentLang={lang} currentPath={Astro.url.pathname} />
        </div>
      </div>
    </nav>
  </header>

  <style>
    .header-shell { backdrop-filter: blur(18px); }
    .header-shell[data-variant="transparent"] { background: linear-gradient(180deg, rgba(15, 23, 42, 0.55) 0%, rgba(15, 23, 42, 0.12) 60%, rgba(15, 23, 42, 0) 100%); border-bottom: 1px solid rgba(255, 255, 255, 0.15); }
    .header-shell[data-variant="default"] { background: rgba(255, 255, 255, 0.94); border-bottom: 1px solid #e2e8f0; box-shadow: 0 6px 24px rgba(17, 24, 39, 0.08); position: sticky; top: 0; }
    .header-nav { max-width: 1200px; margin: 0 auto; padding: 16px 24px; }
    .header-nav__inner { display: flex; align-items: center; justify-content: space-between; gap: 24px; }
    .header-nav__left { display: flex; align-items: center; gap: 24px; }
    .nav-brand { font-weight: 800; font-size: 22px; text-decoration: none; letter-spacing: -0.01em; }
    .nav-links { display: flex; align-items: center; gap: 18px; flex-wrap: wrap; }
    .nav-link { font-weight: 600; font-size: 15px; text-decoration: none; transition: opacity 0.15s ease, color 0.15s ease; }
    .header-shell[data-variant="default"] .nav-link { color: #1f2a44; }
    .header-shell[data-variant="default"] .nav-link:hover { color: #152a45; }
    .header-shell[data-variant="transparent"] .nav-link { color: rgba(255, 255, 255, 0.92); text-shadow: 0 1px 2px rgba(0, 0, 0, 0.25); }
    .header-shell[data-variant="transparent"] .nav-link:hover { color: #ffffff; }
    .header-nav__right { display: flex; align-items: center; gap: 14px; }
    .nav-cta { font-weight: 700; text-decoration: none; }
    @media (max-width: 768px) {
      .header-nav { padding: 14px 18px; }
      .header-nav__inner { flex-direction: column; align-items: flex-start; gap: 12px; }
      .header-nav__right { align-self: stretch; justify-content: space-between; width: 100%; }
      .nav-links { gap: 12px; }
    }

    /* Footer */
    .footer-shell { background: linear-gradient(180deg, #0f172a 0%, #0b1220 100%); color: #d7dce5; padding: 48px 0 40px; border-top: 1px solid rgba(255, 255, 255, 0.08); }
    .footer-container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }
    .footer-grid { display: grid; grid-template-columns: repeat(4, minmax(0, 1fr)); gap: 28px; padding-bottom: 28px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
    .footer-col { display: flex; flex-direction: column; gap: 12px; }
    .footer-title { font-size: 20px; font-weight: 800; color: #ffffff; letter-spacing: -0.01em; }
    .footer-heading { font-size: 15px; font-weight: 700; color: #ffffff; letter-spacing: -0.01em; }
    .footer-text { color: #c5ccda; line-height: 1.6; font-size: 14px; max-width: 260px; }
    .footer-links { display: flex; flex-direction: column; gap: 8px; list-style: none; padding: 0; margin: 0; }
    .footer-link { color: #c5ccda; text-decoration: none; font-weight: 600; font-size: 14px; transition: color 0.15s ease, transform 0.15s ease; }
    .footer-link:hover { color: #ffffff; transform: translateY(-1px); }
    .footer-bottom { padding-top: 22px; text-align: center; color: #9aa4b8; font-size: 13px; }
    @media (max-width: 960px) { .footer-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
    @media (max-width: 600px) {
      .footer-shell { padding: 40px 0 32px; }
      .footer-grid { grid-template-columns: 1fr; gap: 20px; }
      .footer-container { padding: 0 18px; }
    }
  </style>

  <main>
    <slot />
  </main>

  <footer class="footer-shell">
    <div class="footer-container">
      <div class="footer-grid">
        <div class="footer-col">
          <h3 class="footer-title">Pagayo</h3>
          <p class="footer-text">
            {
              lang === 'nl'
                ? 'Multi-tenant SaaS platform voor jouw business'
                : lang === 'de'
                  ? 'Multi-Tenant-SaaS-Plattform für Ihr Geschäft'
                  : 'Multi-tenant SaaS platform for your business'
            }
          </p>
        </div>
        <div class="footer-col">
          <h4 class="footer-heading">
            {lang === 'nl' ? 'Product' : lang === 'de' ? 'Produkt' : 'Product'}
          </h4>
          <ul class="footer-links">
            <li>
              <a href={`/${lang}/features`} class="footer-link">
                {lang === 'nl' ? 'Features' : lang === 'de' ? 'Funktionen' : 'Features'}
              </a>
            </li>
            <li>
              <a href={`/${lang}/pricing`} class="footer-link">
                {lang === 'nl' ? 'Prijzen' : lang === 'de' ? 'Preise' : 'Pricing'}
              </a>
            </li>
          </ul>
        </div>
        <div class="footer-col">
          <h4 class="footer-heading">
            {lang === 'nl' ? 'Resources' : lang === 'de' ? 'Ressourcen' : 'Resources'}
          </h4>
          <ul class="footer-links">
            <li>
              <a href={`/${lang}/docs`} class="footer-link">
                {lang === 'nl' ? 'Documentatie' : lang === 'de' ? 'Dokumentation' : 'Documentation'}
              </a>
            </li>
            <li>
              <a href={`/${lang}/blog`} class="footer-link">Blog</a>
            </li>
          </ul>
        </div>
        <div class="footer-col">
          <h4 class="footer-heading">
            {lang === 'nl' ? 'Bedrijf' : lang === 'de' ? 'Unternehmen' : 'Company'}
          </h4>
          <ul class="footer-links">
            <li>
              <a href={`/${lang}/contact`} class="footer-link">Contact</a>
            </li>
            <li>
              <a href={`/${lang}/privacy`} class="footer-link">Privacy</a>
            </li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>© {new Date().getFullYear()} Pagayo. All rights reserved.</p>
      </div>
    </div>
  </footer>
</BaseLayout>
