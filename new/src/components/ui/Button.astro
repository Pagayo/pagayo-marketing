---
/**
 * Button Component - Pagayo Design System
 * 
 * @prop variant - 'primary' | 'secondary' | 'ghost' | 'danger' (default: 'primary')
 * @prop size - 'sm' | 'md' | 'lg' (default: 'md')
 * @prop href - Optional link URL (renders as <a> instead of <button>)
 * @prop icon - Optional icon to show after text
 * @prop iconPosition - 'left' | 'right' (default: 'right')
 * @prop fullWidth - Makes button full width
 * @prop disabled - Disables the button
 * @prop type - Button type for forms (default: 'button')
 */

interface Props {
  variant?: 'primary' | 'secondary' | 'ghost' | 'danger';
  size?: 'sm' | 'md' | 'lg';
  href?: string;
  icon?: string;
  iconPosition?: 'left' | 'right';
  fullWidth?: boolean;
  disabled?: boolean;
  type?: 'button' | 'submit' | 'reset';
  class?: string;
}

const {
  variant = 'primary',
  size = 'md',
  href,
  icon,
  iconPosition = 'right',
  fullWidth = false,
  disabled = false,
  type = 'button',
  class: className = '',
} = Astro.props;

const Tag = href ? 'a' : 'button';

const classes = [
  'btn',
  `btn-${variant}`,
  `btn-${size}`,
  fullWidth ? 'btn-full' : '',
  disabled ? 'btn-disabled' : '',
  className
].filter(Boolean).join(' ');
---

<Tag
  class={classes}
  href={href}
  type={!href ? type : undefined}
  disabled={!href && disabled ? true : undefined}
  aria-disabled={disabled ? 'true' : undefined}
>
  {icon && iconPosition === 'left' && (
    <span class="btn-icon btn-icon-left">{icon}</span>
  )}
  <span class="btn-text">
    <slot />
  </span>
  {icon && iconPosition === 'right' && (
    <span class="btn-icon btn-icon-right">{icon}</span>
  )}
</Tag>

<style>
  /* Base Button Styles */
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    font-family: var(--font-sans);
    font-weight: 600;
    text-decoration: none;
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: 
      background-color var(--transition-fast),
      color var(--transition-fast),
      transform var(--transition-fast),
      box-shadow var(--transition-fast);
  }

  .btn:focus-visible {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
  }

  .btn:active:not(.btn-disabled) {
    transform: scale(0.98);
  }

  /* Size Variants */
  .btn-sm {
    padding: var(--space-2) var(--space-4);
    font-size: var(--text-sm);
  }

  .btn-md {
    padding: var(--space-3) var(--space-6);
    font-size: var(--text-base);
  }

  .btn-lg {
    padding: var(--space-4) var(--space-8);
    font-size: var(--text-lg);
  }

  /* Primary Variant - GitHub Dark with Accent */
  .btn-primary {
    background: linear-gradient(135deg, #00ff88 0%, #00e077 100%);
    color: #0d1117;
    border: none;
    font-weight: 700;
  }

  .btn-primary:hover:not(.btn-disabled) {
    box-shadow: 0 8px 24px rgba(0, 255, 136, 0.3), 0 0 30px -5px rgba(0, 255, 136, 0.4);
    transform: translateY(-2px);
  }

  /* Secondary Variant - GitHub Dark */
  .btn-secondary {
    background: #161b22;
    color: #c9d1d9;
    border: 1px solid #30363d;
  }

  .btn-secondary:hover:not(.btn-disabled) {
    background: #21262d;
    border-color: #00ff88;
    color: #00ff88;
  }

  /* Ghost Variant - GitHub Dark */
  .btn-ghost {
    background: transparent;
    color: #c9d1d9;
    border: 1px solid #30363d;
  }

  .btn-ghost:hover:not(.btn-disabled) {
    background: rgba(0, 255, 136, 0.1);
    border-color: #00ff88;
    color: #00ff88;
  }

  /* Danger Variant - GitHub Dark */
  .btn-danger {
    background: #f85149;
    color: white;
    border: none;
  }

  .btn-danger:hover:not(.btn-disabled) {
    background: #da3633;
    box-shadow: 0 8px 24px rgba(248, 81, 73, 0.3);
  }

  /* Full Width */
  .btn-full {
    width: 100%;
  }

  /* Disabled State */
  .btn-disabled {
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: none;
  }

  /* Icon Styles */
  .btn-icon {
    display: inline-flex;
    align-items: center;
  }

  .btn-icon-left {
    margin-right: var(--space-1);
  }

  .btn-icon-right {
    margin-left: var(--space-1);
  }
</style>
