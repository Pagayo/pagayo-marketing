---
/**
 * Features page
 */

import BaseLayout from '../../../layouts/BaseLayout.astro';
import HeroSection from '../../../components/sections/HeroSection.astro';
import FeaturesGrid from '../../../components/sections/FeaturesGrid.astro';
import CTASection from '../../../components/sections/CTASection.astro';

import nlConfig from '../../../content/countries/nl.json';
import deConfig from '../../../content/countries/de.json';

export function getStaticPaths() {
  return [
    { params: { region: 'eu', country: 'nl' } },
    { params: { region: 'eu', country: 'de' } },
  ];
}

const { region, country } = Astro.params;

const countryConfigs: Record<string, any> = {
  nl: nlConfig,
  de: deConfig,
};

const config = countryConfigs[country] || nlConfig;
const t = config.translations;

const nav = [
  { label: t.nav.features, href: '/features' },
  { label: t.nav.pricing, href: '/pricing' },
  { label: t.nav.contact, href: '/contact' },
];
---

<BaseLayout 
  title={t.features.title}
  description={t.features.subtitle}
  region={region}
  country={country}
  lang={config.lang}
  nav={nav}
  footerColumns={t.footer.columns}
>
  <!-- Hero -->
  <HeroSection 
    data={{
      headline: t.features.title,
      headlineAccent: '',
      subtitle: t.features.subtitle,
      primaryCta: {
        text: t.nav.startFree,
        url: 'https://app.pagayo.com/register',
      },
    }}
    variant="light"
    showStats={false}
  />

  <!-- All Features -->
  <FeaturesGrid 
    features={t.features.items}
    columns={3}
    variant="cards"
  />

  <!-- CTA -->
  <CTASection 
    title={t.cta.title}
    subtitle={t.cta.subtitle}
    primaryCta={{
      text: t.cta.primaryCta,
      href: 'https://app.pagayo.com/register',
    }}
    variant="gradient"
  />
</BaseLayout>
